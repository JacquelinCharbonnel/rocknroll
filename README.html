<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#OPTIONS">OPTIONS</a>
    <ul>
      <li><a href="#c-config_file">-c config_file</a></li>
      <li><a href="#continue">--continue</a></li>
      <li><a href="#debug">--debug</a></li>
      <li><a href="#dry-run">--dry-run</a></li>
      <li><a href="#help">--help</a></li>
      <li><a href="#man">--man</a></li>
      <li><a href="#no-links">--no-links</a></li>
      <li><a href="#no-roll">--no-roll</a></li>
      <li><a href="#refresh">--refresh</a></li>
      <li><a href="#ro---opt1---opt2---opt3">--ro &quot;--opt1 --opt2 --opt3&quot;</a></li>
      <li><a href="#update">--update</a></li>
    </ul>
  </li>
  <li><a href="#CONFIGURATION-FILE">CONFIGURATION FILE</a></li>
  <li><a href="#CONFIGURATION-FILE-DIRECTIVES">CONFIGURATION FILE DIRECTIVES</a>
    <ul>
      <li><a href="#link-dest-dir">link-dest dir</a></li>
      <li><a href="#mail_from-email">mail_from email</a></li>
      <li><a href="#mail_to-email">mail_to email</a></li>
      <li><a href="#max_runtime-time_in_second">max_runtime time_in_second</a></li>
      <li><a href="#rsync_path-path-to-rsync">rsync_path path/to/rsync</a></li>
      <li><a href="#rsync_retcode_ok-n-n-n-n">rsync_retcode_ok n,n,n,n...</a></li>
      <li><a href="#rsync_retcode_warn-n-n-n">rsync_retcode_warn n,n,n...</a></li>
      <li><a href="#ro_default---opt1---opt2">ro_default &quot;--opt1 --opt2&quot;</a></li>
      <li><a href="#send_warn-0-1">send_warn 0/1</a></li>
      <li><a href="#smtp_server-smtp_server">smtp_server smtp_server</a></li>
      <li><a href="#use_syslog-0-1">use_syslog 0/1</a></li>
    </ul>
  </li>
  <li><a href="#ARCHIVE-INITIALIZATION">ARCHIVE INITIALIZATION</a>
    <ul>
      <li><a href="#init-n">--init n</a></li>
    </ul>
  </li>
  <li><a href="#FILES-AND-DIRECTORIES">FILES AND DIRECTORIES</a>
    <ul>
      <li><a href="#rocknroll.conf">rocknroll.conf</a></li>
      <li><a href="#tag.ctl">.tag.ctl</a></li>
      <li><a href="#tag.running">.tag.running</a></li>
    </ul>
  </li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#COPYRIGHT-LICENSE">COPYRIGHT &amp; LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>rocknroll - Rsync fOr baCKup and Roll</p>

<p>Light incremental backup tool based on rsync.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>rocknroll --init n tag dstdir</p>

<p>rocknroll [options] tag srcdir dstdir</p>

<p>rocknroll --help</p>

<p>rocknroll --man</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>rocknroll backups a remote directories tree srcdir in dstdir onto the local host. For this backup, it manages a set of archives, named tag.1, tag.2, etc. Using the &#39;link-dest&#39; option of rsync, it keeps only the difference between the different archives.</p>

<p>A dstdir can contain several tagged sequences of archive. For example, a dstdir can contain 2 archive sets named daily.1 daily.2 daily.3 daily.4 daily.5 daily.6 daily.7 and week.1 week.2 week.3 week.4.</p>

<p>Before a dstdir can be able to store an archive sequence, it must be formatted with the --init option.</p>

<h1 id="OPTIONS">OPTIONS</h1>

<p>Almost options can as well be specified into the configuration file.</p>

<h2 id="c-config_file">-c config_file</h2>

<p>use an alternate config file.</p>

<p>By default, rocknroll.conf is searched in ., @/, @/../etc/, /etc/, /etc/rocknroll.d/ and /usr/local/etc, where @ is the directory containing the rocknroll binary.</p>

<h2 id="continue">--continue</h2>

<p>start again with an existing .tag.running archive (useful after an abort)</p>

<h2 id="debug">--debug</h2>

<p>debug mode</p>

<h2 id="dry-run">--dry-run</h2>

<p>don&#39;t perfom any action, just say what it could be done</p>

<h2 id="help">--help</h2>

<p>print usage</p>

<h2 id="man">--man</h2>

<p>print the manual</p>

<h2 id="no-links">--no-links</h2>

<p>don&#39;t specify any --link-dest option to rsync</p>

<h2 id="no-roll">--no-roll</h2>

<p>don&#39;t roll up the archives set</p>

<h2 id="refresh">--refresh</h2>

<p>only update the archive tag.1 (without deletion of any files on it). Don&#39;t roll up the archives set.</p>

<h2 id="ro---opt1---opt2---opt3">--ro &quot;--opt1 --opt2 --opt3&quot;</h2>

<p>pass some options to rsync (useful only in argument of command line)</p>

<h2 id="update">--update</h2>

<p>update archive tag.1 (with deletion of obsolete files). Don&#39;t roll up archives set.</p>

<h1 id="CONFIGURATION-FILE">CONFIGURATION FILE</h1>

<p>Some directives are taken from rocknroll.conf, a file located in @/, @/../etc/, /etc/, /etc/rocknroll.d/ where @ is the directory contained the rocknroll binary.</p>

<p>The format of a line is :</p>

<pre><code>  directive=value</code></pre>

<p>or</p>

<pre><code>  directive value</code></pre>

<p>A # starts a comment.</p>

<h1 id="CONFIGURATION-FILE-DIRECTIVES">CONFIGURATION FILE DIRECTIVES</h1>

<p>Each following directive can be passed as well on the command line as an option.</p>

<h2 id="link-dest-dir">link-dest dir</h2>

<p>by default the link-dest option is set to the tag.1 directory name. This option is to bypass this default.</p>

<h2 id="mail_from-email">mail_from email</h2>

<p>set the email address of the sender for the mail alerts</p>

<h2 id="mail_to-email">mail_to email</h2>

<p>set the email address of the recipient for the mail alerts</p>

<h2 id="max_runtime-time_in_second">max_runtime time_in_second</h2>

<p>set the max among of time that a backup can take. Older than this value, a .tag.running temporary directory will be deleted.</p>

<h2 id="rsync_path-path-to-rsync">rsync_path path/to/rsync</h2>

<p>specify the path of the rsync command line (default /usr/bin/rsync)</p>

<h2 id="rsync_retcode_ok-n-n-n-n">rsync_retcode_ok n,n,n,n...</h2>

<p>specify a list of return codes of rsync considered as OK codes. Each code not specified with --rsync_retcode_ok or --rsync_retcode_warn is considered as an error return code.</p>

<h2 id="rsync_retcode_warn-n-n-n">rsync_retcode_warn n,n,n...</h2>

<p>specify a list of return codes of rsync considered as warning codes. Each code not specified with --rsync_retcode_ok or --rsync_retcode_warn is considered as an error return code.</p>

<h2 id="ro_default---opt1---opt2">ro_default &quot;--opt1 --opt2&quot;</h2>

<p>pass some options to rsync (useful only in config file)</p>

<h2 id="send_warn-0-1">send_warn 0/1</h2>

<p>send alert on warning (default is send alert only on error)</p>

<h2 id="smtp_server-smtp_server">smtp_server smtp_server</h2>

<p>set the SMTP server</p>

<h2 id="use_syslog-0-1">use_syslog 0/1</h2>

<p>enable to talk to syslog</p>

<h1 id="ARCHIVE-INITIALIZATION">ARCHIVE INITIALIZATION</h1>

<p>This operation is needed before a directory can be used as a backup destination.</p>

<h2 id="init-n">--init n</h2>

<p>format a backup directory to receive n archives.</p>

<h1 id="FILES-AND-DIRECTORIES">FILES AND DIRECTORIES</h1>

<h2 id="rocknroll.conf">rocknroll.conf</h2>

<p>configuration file</p>

<h2 id="tag.ctl">.tag.ctl</h2>

<p>a control file located in the backup directory, related to the tag archive set.</p>

<h2 id="tag.running">.tag.running</h2>

<p>the temporary directory (located in the archive directory) for the running rsync.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>rsnapshot, &lt;http://rsnapshot.org&gt;. rsnapshot and rocknroll have similar functionalities, and rsnapshot has been the first on the place. But when I began to think about rocknroll, I&#39;ve never heard of rnspashot.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Jacquelin Charbonnel, &lt;jacquelin.charbonnel at math.cnrs.fr&gt;</p>

<h1 id="COPYRIGHT-LICENSE">COPYRIGHT &amp; LICENSE</h1>

<p>Copyright Jacquelin Charbonnel &lt;jacquelin.charbonnel at math.cnrs.fr&gt;</p>

<p>This software is governed by the CeCILL-C license under French law and abiding by the rules of distribution of free software. You can use, modify and/ or redistribute the software under the terms of the CeCILL- C license as circulated by CEA, CNRS and INRIA at the following URL &quot;http://www.cecill.info&quot;.</p>

<p>As a counterpart to the access to the source code and rights to copy, modify and redistribute granted by the license, users are provided only with a limited warranty and the software&#39;s author, the holder of the economic rights, and the successive licensors have only limited liability.</p>

<p>In this respect, the user&#39;s attention is drawn to the risks associated with loading, using, modifying and/or developing or reproducing the software by the user in light of its specific status of free software, that may mean that it is complicated to manipulate, and that also therefore means that it is reserved for developers and experienced professionals having in-depth computer knowledge. Users are therefore encouraged to load and test the software&#39;s suitability as regards their requirements in conditions enabling the security of their systems and/or data to be ensured and, more generally, to use and operate it in the same conditions as regards security.</p>

<p>The fact that you are presently reading this means that you have had knowledge of the CeCILL-C license and that you accept its terms.</p>


</body>

</html>


